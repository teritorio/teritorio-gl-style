language: node_js
sudo: required
node_js:
  - '4'
branches:
  only:
    - master
    - /^v\d+(\.\d+)*$/
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
      - llvm-toolchain-precise-3.5
    packages:
      - libstdc++6
script:
  - 'git clone https://github.com/klokantech/gl-style-package-spec.git'
  - cd gl-style-package-spec
  - bash ./task/run.sh
env:
  global:
    - secure: >-
        ajIc3FsP93V5TCNz5yvwKJRLt741zhd3zmuYQ1TSiqeSsIrVfC7DhWHFq2OBL/tDhDHrMN2yUJJGJUHs7zxR8+sNvnHpP3WenmcjDqF4CUAASal4F8KmtSa26XBG/9FCyKv20k47sKxSoKUh4prPR9msPOMjSAcpmG2di/HTDjrzklFHTj/rXbW7bBAehjYNxU9Uwuhw1jPoVWg6ZiHkGlTtb/BhVGk1zMS9IroamRD6D0fEsju/GUuI5uKLUdJDJ5ttoyFSLkE2OWPuFA13fpPPYadp2+ZQZB4SqadItoexGrfsGSPP+RKMUG0HlVklmw4APHrhgqQFcrUA+fWbPYQ0I9LVWos+rqE+E1AlKR13O2S+OQoacjwh139mRDrdmQa+VLy4TQEMXlHAT31EHebHKlLn8jMNuIj67K6VMa39gL/8QTpfx58rQGLtiiw7v3PjSn1mBT+UU+G2WU3pId1KrvRh1BpGS/uWAmOKM1niD/DWKB2I5UDf2xNyiBMZRCK802eVu1KrXG3n5ygOBi+xtKDUTZUoYrgTkD7QtCpSx+2jKyyrzGi6g7OrJ6tgN6ntMDRmCZ4GKp+xLdx2/swezjzgv/6cfED6D+KyE7fQNo6pniubo8Dwh6+hKyBh9TCdj31Q+v5ol3yWvdKBVKP7dH9Hf2aia094TggL/G8=
deploy:
  provider: releases
  api_key: '${GITHUB_TOKEN}'
  file: 'build/${TRAVIS_TAG}.zip'
  skip_cleanup: true
  'on':
    tags: true
services:
  - docker
